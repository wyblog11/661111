- var pageTitle
- is_archive() ? page.title = findArchivesTitle(page, theme.menu, date) : ''
- if (is_tag()) pageTitle = _p('page.tag') + ': ' + page.tag
- else if (is_category()) pageTitle = _p('page.category') + ': ' + page.category
- else if (is_current('/404.html', [strict])) pageTitle = _p('error404')
- else pageTitle = page.title || config.title || ''

- var isSubtitle = config.subtitle ? ' - ' + config.subtitle : ''
- var tabTitle = is_home() || !pageTitle ? config.title + isSubtitle : pageTitle + ' | ' + config.title
- var pageAuthor = config.email ? config.author + ',' + config.email : config.author
- var pageCopyright = config.copyright || config.author
- var themeColorLight = theme.theme_color && theme.theme_color.enable && theme.theme_color.meta_theme_color_light || '#ffffff'
- var themeColorDark = theme.theme_color && theme.theme_color.enable && theme.theme_color.meta_theme_color_dark || '#0d0d0d'
- var themeColor = theme.display_mode === 'dark' ? themeColorDark : themeColorLight

meta(charset='UTF-8')
meta(http-equiv="X-UA-Compatible" content="IE=edge")
meta(name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0")
title= tabTitle
meta(name="author" content=pageAuthor)
meta(name="copyright" content=pageCopyright)
meta(name ="format-detection" content="telephone=no")
meta(name="theme-color" content=themeColor)

//- Open_Graph
include ./head/Open_Graph.pug

!=favicon_tag(theme.favicon || config.favicon)
link(rel="canonical" href=urlNoIndex(null,config.pretty_urls.trailing_index,config.pretty_urls.trailing_html))

//- 預解析
!=partial('includes/head/preconnect', {}, {cache: true})

//- 網站驗證
!=partial('includes/head/site_verification', {}, {cache: true})

//- PWA
if (theme.pwa && theme.pwa.enable)
  !=partial('includes/head/pwa', {}, {cache: true})

//- main css
link(rel='stylesheet', href=url_for(theme.asset.main_css))
link(rel='stylesheet', href=url_for(theme.asset.fontawesomeV6) media="print" onload="this.media='all'")

if (theme.snackbar && theme.snackbar.enable)
  link(rel='stylesheet', href=url_for(theme.asset.snackbar_css) media="print" onload="this.media='all'")

if theme.fancybox
  link(rel='stylesheet' href=url_for(theme.asset.fancybox_css_v4) media="print" onload="this.media='all'")

//- google_adsense
!=partial('includes/head/google_adsense', {}, {cache: true})

//- analytics
!=partial('includes/head/analytics', {}, {cache: true})

//- font
if theme.blog_title_font &&　theme.blog_title_font.font_link
  link(rel='stylesheet' href=url_for(theme.blog_title_font.font_link) media="print" onload="this.media='all'")

//- global config
!=partial('includes/head/config', {}, {cache: true})

include ./head/config_site.pug
include ./head/noscript.pug

!=fragment_cache('injectHeadJs', function(){return inject_head_js()})

!=fragment_cache('injectHead', function(){return injectHtml(theme.inject.head)})

#myscoll

#首页魔改
if is_home()
    #home_top
        .down-index
            .type
                a(alt="无聊")
                  img(src='https://blog.4t.pw/img/tz/1.webp' style='width:100px;height:100px;')
                a.hover(alt="期待")
                  img(src='https://blog.4t.pw/img/tz/2.webp' style='width:100px;height:100px;')
                a(alt="绿色软开心件")
                  img(src='https://blog.4t.pw/img/tz/3.webp' style='width:100px;height:100px;')
            .tpl-tr-wai
                .tpl-tr1.layui-clear1(style='transform: translateX(0px);')
                    .list-top
                      .home_top2
                        #notice.notice.touying(onclick=`window.open('/notice/','_self')`)
                            svg.notice-logo.icon.cyber-swiper-item-decoration(aria-hidden='true')
                              use(xlink:href='#icon-a-355_wsa')
                            #noticeList.swiper-container
                                .swiper-wrapper
                                    each i in site.data.notice.index1
                                      .li-style.swiper-slide=i.date
                            i.notice-enter.fas.fa-arrow-circle-right
                      .home_top1
                        .bannerGroup2
                          div(id="random")
                            canvas#canvas.touying(width='927' height='325')
                                script(src='https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/gsap/3.9.1/gsap.min.js')
                                script(src='https://cdn.zhheo.com/page/people/script.js')
                            a(id="random-hover" style="width:100%;height:auto;" href="javascript:toRandomPost()")
                                span &nbsp
                                i.fa.fa-paper-plane
                                div &nbsp随便逛逛→
                          .categoryGroup
                            .categoryItem(style='box-shadow: var(--heo-shadow-blue);')
                                a.categoryButton.bikan(href='/posts/c6050a1d/', data-pjax-state)
                                    span.categoryButtonText 魔改锦囊
                                    i.fas.fa-dove
                            .categoryItem(style='box-shadow: var(--heo-shadow-red);')
                                a.categoryButton.remen(href='/tags/魔改/', data-pjax-state)
                                    span.categoryButtonText 热门魔改
                                    i.fas.fa-burn
                            .categoryItem(style='box-shadow: var(--heo-shadow-green);')
                                a.categoryButton.shiyong.touying(href='/tags/教程/', data-pjax-state)
                                    span.categoryButtonText 实用教程
                                    i.fas.fa-book
                        .div-card3.touying
                          .news 
                            each article, index in site.categories.findOne({name: 'Docs文檔'}).posts.data
                              if index < 11
                                li.new.fa-fw.fa.fa-link
                                  a(href=url_for(article.path) title=article.title)!= index+_p('、') + article.title
                                  span!=date(article.date, config.date_format)
                          #todayCard.todayCard(onclick="javascript:window.open('https://blog.zhheo.com/p/671f98c8.html')" style='z-index: 1;')
                            .todayCard-info
                              .todayCard-tips 重磅更新
                              .todayCard-title 今年过年，来放电子鞭炮
                            .todayCard-cover(style="background: url('/img/bt.webp') no-repeat center /cover")
                            .banner-button-group
                              a.banner-button(onclick='window.event.cancelBubble=true;buttonClick();' data-pjax-state='external')
                                i.fas.fa-circle-plus
                                span.banner-button-text 更多推荐
                    .list-top
                      .home_top2
                        #notice.notice.touying(onclick=`window.open('/notice/','_self')`)
                            svg.notice-logo.icon.cyber-swiper-item-decoration(aria-hidden='true')
                              use(xlink:href='#icon-a-68_devcloud-collaboration')
                            #noticeList.swiper-container
                                .swiper-wrapper
                                    each i in site.data.notice.index2
                                      .li-style.swiper-slide=i.date
                            i.notice-enter.fas.fa-arrow-circle-right
                      .home_top1
                        .bannerGroup2
                          if theme.swiperBar.enable
                            !=partial('includes/custom/cyber_swiperBar', {}, {cache: true})
                          .categoryGroup
                            .categoryItem(style='box-shadow: var(--heo-shadow-blue);')
                                a.categoryButton.bikan(href='/posts/c6050a1d/', data-pjax-state)
                                    span.categoryButtonText 魔改锦囊
                                    i.fas.fa-dove
                            .categoryItem(style='box-shadow: var(--heo-shadow-red);')
                                a.categoryButton.remen(href='/tags/魔改/', data-pjax-state)
                                    span.categoryButtonText 热门魔改
                                    i.fas.fa-burn
                            .categoryItem(style='box-shadow: var(--heo-shadow-green);')
                                a.categoryButton.shiyong.touying(href='/tags/教程/', data-pjax-state)
                                    span.categoryButtonText 实用教程
                                    i.fas.fa-book
                        .div-card2.touying
                          i.notice-logo2.fas.fa-bullhorn.fa-shake
                          span=' '+_p('推荐文章')
                          .news
                            each article, index in site.categories.findOne({name: '魔改'}).posts.data
                              if index < 9
                                li.new.fa-fw.fa.fa-link
                                  a(href=url_for(article.path) title=article.title  style=article.ztys)!= index+_p('、') + article.title
                                  span!=date(article.date)
                    .list-top
                      .home_top2
                        #notice.notice.touying(onclick=`window.open('/notice/','_self')`)
                            svg.notice-logo.icon.cyber-swiper-item-decoration(aria-hidden='true')
                              use(xlink:href='#icon-V')
                            #noticeList.swiper-container
                                .swiper-wrapper
                                    each i in site.data.notice.index3
                                      .li-style.swiper-slide=i.date
                            i.notice-enter.fas.fa-arrow-circle-right
                      .home_top1
                        .bannerGroup2
                          #banners.touying
                            .banners-title
                                .banners-title-big 无限活力
                                .banners-title-big 与热爱生活
                            .tags-group-all
                                .tags-group-wrapper
                                    each i in site.data.creativity
                                        - const evenNum = i.creativity_list.filter((x, index) => index % 2 === 0);
                                        - const oddNum = i.creativity_list.filter((x, index) => index % 2 === 1);
                                        each item, index in i.creativity_list
                                            if ((index + 1 <= evenNum.length) && (index + 1 <= oddNum.length))
                                                .tags-group-icon-pair
                                                    .tags-group-icon(style=`background: ${evenNum[index].color}`)
                                                        img(src=evenNum[index].icon, onerror='this.onerror=null,this.src="/img/friend_404.gif"', title=evenNum[index].name, alt=evenNum[index].name)
                                                    .tags-group-icon(style=`background: ${oddNum[index].color}`)
                                                        img(src=oddNum[index].icon, onerror='this.onerror=null,this.src="/img/friend_404.gif"', title=oddNum[index].name, alt=oddNum[index].name)
                                    each i in site.data.creativity
                                        - const evenNum = i.creativity_list.filter((x, index) => index % 2 === 0);
                                        - const oddNum = i.creativity_list.filter((x, index) => index % 2 === 1);
                                        each item, index in i.creativity_list
                                            if ((index + 1 <= evenNum.length) && (index + 1 <= oddNum.length))
                                                .tags-group-icon-pair
                                                    .tags-group-icon(style=`background: ${evenNum[index].color}`)
                                                        img(src=evenNum[index].icon, onerror='this.onerror=null,this.src="/img/friend_404.gif"', title=evenNum[index].name, alt=evenNum[index].name)
                                                    .tags-group-icon(style=`background: ${oddNum[index].color}`)
                                                        img(src=oddNum[index].icon, onerror='this.onerror=null,this.src="/img/friend_404.gif"', title=oddNum[index].name, alt=oddNum[index].name)
                            a(id="random-hover" style="width:100%;height:auto;" href="javascript:toRandomPost()")
                                span &nbsp随便逛逛
                                div &nbsp→
                          .categoryGroup
                            .categoryItem(style='box-shadow: var(--heo-shadow-blue);')
                                a.categoryButton.bikan(href='/posts/c6050a1d/', data-pjax-state)
                                    span.categoryButtonText 魔改锦囊
                                    i.fas.fa-dove
                            .categoryItem(style='box-shadow: var(--heo-shadow-red);')
                                a.categoryButton.remen(href='/tags/魔改/', data-pjax-state)
                                    span.categoryButtonText 热门魔改
                                    i.fas.fa-burn
                            .categoryItem(style='box-shadow: var(--heo-shadow-green);')
                                a.categoryButton.shiyong.touying(href='/tags/教程/', data-pjax-state)
                                    span.categoryButtonText 实用教程
                                    i.fas.fa-book
                        .div-card3.touying
                          .about-statistic2.author-content-item3
                            .card-content
                              .todayCard-info
                                .todayCard-tips 重磅更新
                                .todayCard-title 今年过年，来放电子鞭炮 
        .js-pjax
          script(src='https://unpkg.com/swiper/swiper-bundle.min.js' data-pjax='')
          script.
            var swiper = new Swiper ('#noticeList', {
              spaceBetween: 30,
              centeredSlides: true,
              direction: 'vertical', // 垂直切换选项
              loop: true, // 循环模式选项
              autoplay: {
                delay: 3000,
                disableOnInteraction: false,
              },
            })
        link(rel='stylesheet', href='https://blog.4t.pw/css/mycss.css')
